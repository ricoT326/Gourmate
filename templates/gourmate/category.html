{% extends 'gourmate/base.html' %}
{% load staticfiles %}

{% block title_block %}
    {% if category %}
        {{ category.name }}
    {% else %}
        Unknown Category
    {% endif %}
{% endblock %}

{% block body_block %}
    {% if user.is_authenticated %}
        <a href="{% url 'gourmate:add_recipe' category.slug %}">Add Page</a> <br />
    {% endif %}

    {% if category %}
        <h1>{{ category.name }}</h1>
    {% if recipes %}
    <ul>
        {% for recipe in recipes %}
        <div class="container">
            <ul  class="list-group list-group-flush">
                <li  class="list-group-item">
                    <h2 class="jumbotron-heading" style="color: #C13C14;">
                        <a href="{% url 'gourmate:show_recipe' recipe.slug %}">
                            {{ recipe.title.errors }}
                            {{ recipe.title }}
                            <img src="{{ MEDIA_URL }}{{ recipe.picture }}" class="figure-img img-fluid" alt="PlaceHolder">
                        </a>
                    </h2>

                    <div class="col-sm-9">
                    {% for category in categories %}
                        <label class="checkbox-inline" style="color:darksalmon;">
                        <input value="{{ category.id }}" type="checkbox" name="tags"/>{{ category.name }}
                        </label>
                    {% endfor %}
                    </div>

                    <div class="form-group">
                        <div class="col-sm-9" style="color:darksalmon;">
                        {% for category in categories %}
                            <a href="{% url 'gourmate:show_category' category.slug %}"></a>
                                {{ category.name }}
                        {% endfor %}
                        </div>
                    </div>

                    {% if request.user.is_authenticated %}
                    <div class="form-group ">
                        <a class="btn btn-primary" title="Like recipe" href="{% url 'rate' type='recipe' id=recipe.id %}?value=1">
                            <span data-feather="heart" color="pink"></span> :{{recipe.likes}}
                        </a>
                    </div>
                    {% else %}
                        <p><span data-feather="heart" color="pink"></span> :{{recipe.likes}}</p>
                        <p>To like this recipe please <a href="{% url 'login' %}">log in</a> or <a href="{% url 'register' %}">register</a></p>
                    {% endif %}
                </li>
            </ul>
        </div>
        {% endfor %}
    </ul>
    {% else %}
        <strong>No recipes currently in category.</strong>
    {% endif %}
{% endblock %}